{% extends 'store/base.html' %}
{% load static %}

{% block title %}
{% if category %}{{ category.name }}{% else %}All Cakes{% endif %} - Achola Cakes
{% endblock %}

{% block content %}
<!-- Hero Section -->
{% if not category %}
<div class="hero-slider">
    <div class="hero-slides">
        <div class="hero-slide active"
            style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
        </div>
        <div class="hero-slide"
            style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1464349095431-e9a21285b5f3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
        </div>
        <div class="hero-slide"
            style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1535141192574-5d4897c12636?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
        </div>
    </div>
    <div class="hero-content">
        <h1>Baking Joy, One Slice at a Time</h1>
        <p>Handcrafted cakes made with premium ingredients for your special moments.</p>
        <a href="#shop" class="btn" style="background-color: var(--color-gold); color: #333;">Browse Menu</a>
    </div>
</div>
{% endif %}

<!-- Main Collection -->
<div id="shop" style="margin-bottom: 40px; text-align: center;">
    {% if query %}
    <h2 style="font-size: 2rem; margin-bottom: 20px;">Search Results for "{{ query }}"</h2>
    {% else %}
    <h2 style="font-size: 2rem; margin-bottom: 20px;">
        {% if category %}
        {{ category.name }}
        {% else %}
        Our Collection
        {% endif %}
    </h2>
    {% endif %}

    <div class="categories-filter">
        <a href="{% url 'store:product_list' %}" class="btn-filter {% if not category %}active{% endif %}"
            style="text-decoration:none;">All</a>
        {% for c in categories %}
        <a href="{% url 'store:product_list_by_category' c.slug %}"
            class="btn-filter {% if category.slug == c.slug %}active{% endif %}" style="text-decoration:none;">{{ c.name
            }}</a>
        {% endfor %}
    </div>
</div>

<div class="product-grid" style="margin-bottom: 60px;">
    {% for product in products %}
    {% include "store/includes/product_card.html" %}
    {% empty %}
    <p>No cakes found.</p>
    {% endfor %}
</div>

<!-- Segments (Only on Homepage) -->
{% if bestsellers %}
<div class="segment-section" style="margin-bottom: 50px;">
    <h2 style="font-size: 2rem; margin-bottom: 20px; text-align: center; color: var(--color-milk-choco);">Customer
        Favorites</h2>
    <div class="product-grid">
        {% for product in bestsellers %}
        {% include "store/includes/product_card.html" %}
        {% endfor %}
    </div>
</div>
{% endif %}

{% if wedding_cakes %}
<div class="segment-section" style="margin-bottom: 50px;">
    <h2 style="font-size: 2rem; margin-bottom: 20px; text-align: center; color: var(--color-milk-choco);">Wedding Cakes
    </h2>
    <div class="product-grid">
        {% for product in wedding_cakes %}
        {% include "store/includes/product_card.html" %}
        {% endfor %}
    </div>
</div>
{% endif %}

{% if custom_cakes %}
<div class="segment-section" style="margin-bottom: 50px;">
    <h2 style="font-size: 2rem; margin-bottom: 20px; text-align: center; color: var(--color-milk-choco);">Custom Ideas
    </h2>
    <div class="product-grid">
        {% for product in custom_cakes %}
        {% include "store/includes/product_card.html" %}
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- News & Events Section (Only on Homepage) -->
{% if latest_news %}
<div class="news-section">
    <h2 class="news-header">News and Events</h2>
    <div class="news-post">
        <div class="news-image-wrapper">
            <div class="news-date">
                <span>{{ latest_news.published_date|date:"d" }}</span> {{ latest_news.published_date|date:"M"|upper }}
            </div>
            <img src="{{ latest_news.image.url }}" class="news-image" alt="{{ latest_news.title }}">
        </div>
        <div class="news-content-card">
            <div class="news-tags">{{ latest_news.tags }}</div>
            <h3 class="news-title">{{ latest_news.title }}</h3>
            <div class="news-meta">Posted by Achola Cakes</div>
            <p class="news-excerpt">{{ latest_news.excerpt }}</p>
            <a href="{{ latest_news.get_absolute_url }}" class="btn-read-more">CONTINUE READING</a>
        </div>
    </div>
</div>
{% endif %}

<!-- Contact and Social Segment -->
<div class="contact-social-segment">
    <div class="segment-inner">
        <div class="segment-logo">
            <img src="{% static 'images/logo.png' %}" alt="Achola Cakes Logo">
        </div>
        <h2 class="segment-motto">Baking Joy, One Slice at a Time</h2>
        <div class="segment-details">
            <p class="detail-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                NAIROBI, KENYA
            </p>
            <p class="detail-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                    </path>
                </svg>
                PHONE: +254718175095
            </p>
            <p class="detail-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                EMAIL: acholaicing@gmail.com
            </p>
        </div>
        <div class="social-icons">
            <a href="#" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                </svg>
            </a>
            <a href="#" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                    </path>
                </svg>
            </a>
            <a href="https://www.instagram.com/acholasicing?igsh=MWRqMjJ3M20zcmc5MA==" class="social-icon"
                target="_blank" rel="noopener noreferrer">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
            </a>
            <a href="https://www.tiktok.com/@acholasicing?_r=1&_t=ZS-93gxWyh3H9B" class="social-icon" target="_blank"
                rel="noopener noreferrer">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"></path>
                </svg>
            </a>
            <a href="#" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.42a2.78 2.78 0 0 0-1.94 2C1 8.12 1 12 1 12s0 3.88.42 5.58a2.78 2.78 0 0 0 1.94 2c1.72.42 8.6.42 8.6.42s6.88 0 8.6-.42a2.78 2.78 0 0 0 1.94-2C23 15.88 23 12 23 12s0-3.88-.42-5.58z">
                    </path>
                    <polygon points="9.75 15.02 15.5 12 9.75 8.98 9.75 15.02"></polygon>
                </svg>
            </a>
            <a href="#" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                    <rect x="2" y="9" width="4" height="12"></rect>
                    <circle cx="4" cy="4" r="2"></circle>
                </svg>
            </a>
        </div>
    </div>
</div>
{% endblock %}