{% extends "store/base.html" %}

{% block title %}Checkout{% endblock %}

{% block content %}
<h1>Checkout</h1>
<div style="display: flex; gap: 40px; margin-top: 20px;">
    <div style="flex: 1;">
        <h3>Your Order</h3>
        <ul style="list-style: none; padding: 0;">
            {% for item in cart %}
            <li style="border-bottom: 1px solid #eee; padding: 10px 0;">
                <span>{{ item.quantity }}x {{ item.product.name }}</span>
                <span style="float: right;">Ksh {{ item.total_price }}</span>
            </li>
            {% endfor %}
            <li style="font-weight: bold; padding-top: 10px; font-size: 1.1em;">
                Total: <span style="float: right;">Ksh {{ cart.get_total_price }}</span>
            </li>
        </ul>
    </div>
    <div style="flex: 1; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
        <h3>Shipping Details</h3>
        <form action="." method="post">
            {% csrf_token %}

            <h4 style="margin-bottom: 10px; color: #5D4037;">Contact Info</h4>
            <div style="margin-bottom: 15px;">
                <label>First Name:</label> {{ form.first_name }}
            </div>
            <div style="margin-bottom: 15px;">
                <label>Last Name:</label> {{ form.last_name }}
            </div>
            <div style="margin-bottom: 15px;">
                <label>Email:</label> {{ form.email }}
            </div>

            <h4 style="margin-bottom: 10px; color: #5D4037;">Delivery Address</h4>
            <div style="margin-bottom: 15px;">
                <label>Address:</label> {{ form.address }}
            </div>
            <div style="display: flex; gap: 10px;">
                <div style="flex:1;">
                    <label>City:</label> {{ form.city }}
                </div>
                <div style="flex:1;">
                    <label>Postal Code:</label> {{ form.postal_code }}
                </div>
            </div>

            <h4 style="margin-bottom: 10px; color: #5D4037;">Fulfillment</h4>
            <div style="margin-bottom: 15px;">
                <label>Method:</label> {{ form.fulfillment_method }}
            </div>
            <div style="margin-bottom: 15px;">
                <label>Date (Must be 48h in advance):</label> {{ form.delivery_date }}
            </div>
            <div style="margin-bottom: 15px;">
                <label>Special Instructions:</label> {{ form.special_instructions }}
            </div>

            {% if form.errors %}
            <div style="background: #ffebee; color: #c62828; padding: 10px; border-radius: 4px; margin-bottom: 15px;">
                <strong>Please correct the errors below:</strong>
                {{ form.errors }}
            </div>
            {% endif %}

            <input type="submit" value="Place Order" class="btn"
                style="width: 100%; border: none; cursor: pointer; font-size: 1.1rem; margin-top: 10px;">
        </form>
    </div>
</div>
{% endblock %}